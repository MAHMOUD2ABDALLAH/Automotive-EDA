import pandas as pd
import numpy as np
import seaborn as sns
from sklearn.preprocessing import LabelEncoder

# Check if running in CI environment (optional)
import os
if os.getenv('CI'):  # GitHub Actions sets CI=true
    import matplotlib
    matplotlib.use('Agg')
import matplotlib.pyplot as plt

# Your main code here...
path = "https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBMDeveloperSkillsNetwork-DA0101EN-SkillsNetwork/labs/Data%20files/automobileEDA.csv"
df = pd.read_csv(path)

# ... rest of your analysis code

# For plots - works in both environments
sns.regplot(x="engine-size", y="price", data=df)
if os.getenv('CI'):
    plt.savefig('plot.png')
else:
    plt.show()
